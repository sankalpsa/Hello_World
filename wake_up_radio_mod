%here i will be writing code for modified Wake-up-radio
%find max of the input and updating it and repeating the cycle



% no_of_nodes=input("Enter total number 0f nudoes\n");      %enter no.of nodes
% batteryValues=zeros(1,no_of_nodes);                       %Initialising battery values to zero

% for i=1:no_of_nodes
%     fprintf("ENter the values of node %d\n",i);
%     batteryValues(1,i)=input(" ");
% end
batteryValues=[12,30,15,9,6];
no_of_nodes=5;

function [max,sorted_values]=get_max(batteryValues)  %start of the function to find out 1st,2nd and 3rd max nnumbers in the array and also the sorted array
    sorted_values=sort(batteryValues,'descend');
    max=sorted_values(1:3);
end                                                  %end of the get_max function

[MAX,Sorted_values]=get_max(batteryValues);             %Calling get_max function to store the respected values


function update=batteryReduction(MAX,batteryValues)     %start of batteryReduction function
    j=find(MAX(1)==batteryValues);                      %will find the index of node with high battery value
    while batteryValues(j)>=MAX(2)%|| batteryValues(j)<=MAX(3)      
        batteryValues(j)=batteryValues(j)-1;
    end
    update=batteryValues;
end                         %end of batteryReduction function
k=1;
while MAX~=1               %start of while loop to reduce the battery
MAX=get_max(batteryValues);
    history(k,:)=batteryValues;        %this variable will store the history of how battery values were reduced
        k=k+1;
    Update=batteryReduction(MAX,batteryValues);
    
    batteryValues=Update;
end
